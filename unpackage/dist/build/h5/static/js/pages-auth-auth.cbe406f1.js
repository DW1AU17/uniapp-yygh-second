(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-auth-auth"],{"08cd":function(e,t,a){e.exports=a.p+"static/img/logo.3eccfdd2.jpg"},"2b05":function(e,t,a){var n=a("fcec");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var r=a("4f06").default;r("0aa2c166",n,!0,{sourceMap:!1,shadowMode:!1})},"366b":function(e,t,a){"use strict";a.r(t);var n=a("d0cb"),r=a("7593");for(var c in r)"default"!==c&&function(e){a.d(t,e,(function(){return r[e]}))}(c);a("37dd");var i,o=a("f0c5"),u=Object(o["a"])(r["default"],n["b"],n["c"],!1,null,"177fa7d1",null,!1,n["a"],i);t["default"]=u.exports},"37dd":function(e,t,a){"use strict";var n=a("2b05"),r=a.n(n);r.a},7593:function(e,t,a){"use strict";a.r(t);var n=a("e9b7"),r=a.n(n);for(var c in n)"default"!==c&&function(e){a.d(t,e,(function(){return n[e]}))}(c);t["default"]=r.a},d0cb:function(e,t,a){"use strict";var n;a.d(t,"b",(function(){return r})),a.d(t,"c",(function(){return c})),a.d(t,"a",(function(){return n}));var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",{staticClass:"auth-page"},[n("v-uni-view",{staticClass:"img"},[n("v-uni-image",{attrs:{src:a("08cd").replace(/^\./,""),mode:"aspectFit"}})],1),n("v-uni-view",{staticClass:"fc666 fs16 title"},[e._v("· 绑定手机号后才能正常享受预约服务")]),n("v-uni-button",{attrs:{type:"primary","open-type":"getPhoneNumber"},on:{getphonenumber:function(t){arguments[0]=t=e.$handleEvent(t),e.getPhoneNumber.apply(void 0,arguments)}}},[e._v("获取手机号")])],1)},c=[]},e9b7:function(e,t,a){"use strict";var n=a("4ea4");a("99af"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("96cf");var r=n(a("1da1")),c=n(a("5530")),i=a("2f62"),o=a("f50a"),u=a("a316"),s={data:function(){return{sourceData:{},type:""}},onLoad:function(e){var t=this,a=e.type;this.type=a;var n=this.getOpenerEventChannel();n.on("loginDataFromMine",(function(e){var a=e.data,n=a.rawData,r=a.signature;t.sourceData={userInfo:"123",rawData:n,signature:r}}))},computed:(0,c.default)({},(0,i.mapState)(["wechatToken"])),methods:(0,c.default)((0,c.default)({},(0,i.mapMutations)(["login","setPatientInfo","setPatientList"])),{},{getPhoneNumber:function(e){var t=this;return(0,r.default)(regeneratorRuntime.mark((function a(){var n,r,i,s,d,f,p,l,v,g,b,h,m;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(console.log(e),n=e.detail,r=n.encryptedData,i=n.iv,s=n.errMsg,"getPhoneNumber:ok"!==s){a.next=29;break}return t.sourceData=(0,c.default)((0,c.default)({},t.sourceData),{},{encryptedData:r,iv:i},t.wechatToken),a.next=6,(0,o.wechatHandleUserInfo)(t.sourceData);case 6:if(d=a.sent,0!==d.code){a.next=27;break}if(f=d.data,p=f.needRegisterFlag,l=f.pubUser,"0"!==p){a.next=27;break}if(!l){a.next=26;break}if(v=l.username,g=l.idCard,b=l.phoneNumber,h=l.id,t.setPatientInfo(l),!v||!g){a.next=23;break}return t.login(),a.next=17,(0,u.getPatientList)({userId:l.id});case 17:m=a.sent,t.setPatientList(m.data),t.successAlert("登录成功"),uni.switchTab({url:"/pages/tabBar/".concat(t.type,"/").concat(t.type)}),a.next=24;break;case 23:uni.redirectTo({url:"/pages/complateInfo/index?p=".concat(b,"&id=").concat(h,"&type=").concat(t.type)});case 24:a.next=27;break;case 26:uni.redirectTo({url:"/pages/complateInfo/index?p=".concat(phoneNumber,"&id=").concat(id,"&type=").concat(t.type)});case 27:a.next=30;break;case 29:t.errorAlert("取消操作");case 30:case"end":return a.stop()}}),a)})))()}})};t.default=s},fcec:function(e,t,a){var n=a("24fb");t=n(!1),t.push([e.i,'@charset "UTF-8";\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 阴影色 */\n/* 边框色 */\n/* 圆角尺寸 */\n/* 背景色 */\n/* 面板相关字体 */.auth-page[data-v-177fa7d1]{background-color:#fff;text-align:center;padding:10px}.auth-page .img uni-image[data-v-177fa7d1]{width:60%}.auth-page .title[data-v-177fa7d1]{margin:10px 0}.auth-page uni-button[data-v-177fa7d1]{background-color:#a04d54}.auth-page uni-button.button-hover[data-v-177fa7d1]{background-color:#a04d54}',""]),e.exports=t}}]);