(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/search/search"],{"3b12":function(t,e,n){"use strict";var o;n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return o}));var r=function(){var t=this,e=t.$createElement;t._self._c},i=[]},"734b":function(t,e,n){},"7ac1":function(t,e,n){"use strict";(function(t){n("a850");o(n("66fd"));var e=o(n("8cf7"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},"8cf7":function(t,e,n){"use strict";n.r(e);var o=n("3b12"),r=n("cd60");for(var i in r)"default"!==i&&function(t){n.d(e,t,(function(){return r[t]}))}(i);n("af36");var c,a=n("f0c5"),s=Object(a["a"])(r["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],c);e["default"]=s.exports},"963f":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i(n("a34a")),r=n("f0b6");n("2f62");function i(t){return t&&t.__esModule?t:{default:t}}function c(t,e,n,o,r,i,c){try{var a=t[i](c),s=a.value}catch(u){return void n(u)}a.done?e(s):Promise.resolve(s).then(o,r)}function a(t){return function(){var e=this,n=arguments;return new Promise((function(o,r){var i=t.apply(e,n);function a(t){c(i,o,r,a,s,"next",t)}function s(t){c(i,o,r,a,s,"throw",t)}a(void 0)}))}}var s=function(){n.e("components/uni-search-bar/uni-search-bar").then(function(){return resolve(n("c963"))}.bind(null,n)).catch(n.oe)},u=function(){n.e("components/doctor-panel/doctor-panel").then(function(){return resolve(n("5ce4"))}.bind(null,n)).catch(n.oe)},f={components:{search:s,doctorPanel:u},data:function(){return{isSource:!0,doctorList:[],subList:[],historyList:[],orgCode:""}},onLoad:function(t){var e=t.orgCode,n=t.hospitalId;this.orgCode=e,this.hospitalId=n,this.initSetSearchList()},methods:{initSetSearchList:function(){this.historyList=this.getHistorySearchList()||[]},getHistorySearchList:function(){return t.getStorageSync("searchHistory")},setHistory:function(e){var n=this.getHistorySearchList()||[];e&&n.push(e),n=Array.from(new Set(n.slice(0,10))),this.historyList=n,t.setStorageSync("searchHistory",n)},deleteSearchList:function(){var e=this;t.showModal({title:"提示",content:"删除历史记录",success:function(n){n.confirm?(t.setStorageSync("searchHistory",[]),e.historyList=[]):n.cancel}})},search:function(t){var e=this;return a(o.default.mark((function n(){var i,c;return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.isSource=!1,i={orgCode:e.orgCode,searchKey:t},n.next=4,(0,r.searchDoctor)(i);case 4:c=n.sent,0===c.code?(e.handleData(c.data),e.setHistory(t)):(e.doctorList=[],e.subList=[]);case 6:case"end":return n.stop()}}),n)})))()},handleData:function(t){var e=t.filter((function(t){return"1"===t.type})),n=t.filter((function(t){return"2"===t.type}));this.doctorList=this.handleDoctorItemData(e),this.subList=n},handleDoctorItemData:function(t){return t.map((function(t){return{img:t.sffLoginNum||"0000",id:t.sffId,name:t.sffName,title:t.sffProfessionalWrapper,introduce:t.sffSummary||"",depName:t.depName}}))},goDoctorPage:function(e){var n=e.sffId,o=e.depName;t.navigateTo({url:"/pages/doctor/doctor?deptId=".concat(n,"&name=").concat(o,"&orgCode=").concat(this.orgcode,"&hospitalId=").concat(this.hospitalId)})},debounce:function(t,e){clearTimeout(this.timer),this.timer=setTimeout((function(){e&&t(e)}),500)},editImgUrl:function(t){var e=this.doctorList.findIndex((function(e){return e.id===t.id}));this.doctorList[e].img=t.url}},computed:{}};e.default=f}).call(this,n("543d")["default"])},af36:function(t,e,n){"use strict";var o=n("734b"),r=n.n(o);r.a},cd60:function(t,e,n){"use strict";n.r(e);var o=n("963f"),r=n.n(o);for(var i in o)"default"!==i&&function(t){n.d(e,t,(function(){return o[t]}))}(i);e["default"]=r.a}},[["7ac1","common/runtime","common/vendor"]]]);