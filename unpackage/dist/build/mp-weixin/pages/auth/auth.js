(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/auth/auth"],{5846:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=u(n("a34a")),a=n("2f62"),o=n("aad7"),c=n("5431");function u(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n,r,a,o,c){try{var u=e[o](c),i=u.value}catch(s){return void n(s)}u.done?t(i):Promise.resolve(i).then(r,a)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function c(e){i(o,r,a,c,u,"next",e)}function u(e){i(o,r,a,c,u,"throw",e)}c(void 0)}))}}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p={data:function(){return{sourceData:{},type:""}},onLoad:function(e){var t=this,n=e.type;this.type=n;var r=this.getOpenerEventChannel();r.on("loginDataFromMine",(function(e){var n=e.data,r=n.rawData,a=n.signature;t.sourceData={userInfo:"123",rawData:r,signature:a}}))},computed:d({},(0,a.mapState)(["wechatToken"])),methods:d(d({},(0,a.mapMutations)(["login","setPatientInfo","setPatientList"])),{},{getPhoneNumber:function(t){var n=this;return s(r.default.mark((function a(){var u,i,s,f,l,p,b,v,h,g,y,m,O,w,P,k,x;return r.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(console.log(t),u=t.detail,i=u.encryptedData,s=u.iv,f=u.errMsg,"getPhoneNumber:ok"!==f){r.next=30;break}return l=n.wechatToken,p=l.openId,b=l.sessionKey,v=d(d({},n.sourceData),{},{encryptedData:i,iv:s,openId:p,sessionKey:b}),r.next=7,(0,o.wechatHandleUserInfo)(v);case 7:if(h=r.sent,0!==h.code){r.next=28;break}if(g=h.data,y=g.needRegisterFlag,m=g.pubUser,"0"!==y){r.next=28;break}if(!m){r.next=27;break}if(O=m.username,w=m.idCard,P=m.phoneNumber,k=m.id,n.setPatientInfo(m),!O||!w){r.next=24;break}return n.login(),r.next=18,(0,c.getPatientList)({userId:m.id});case 18:x=r.sent,n.setPatientList(x.data),n.successAlert("登录成功"),e.switchTab({url:"/pages/tabBar/".concat(n.type,"/").concat(n.type)}),r.next=25;break;case 24:e.redirectTo({url:"/pages/complateInfo/index?p=".concat(P,"&id=").concat(k,"&type=").concat(n.type)});case 25:r.next=28;break;case 27:e.redirectTo({url:"/pages/complateInfo/index?p=".concat(phoneNumber,"&id=").concat(id,"&type=").concat(n.type)});case 28:r.next=31;break;case 30:n.errorAlert("取消操作");case 31:case"end":return r.stop()}}),a)})))()}})};t.default=p}).call(this,n("543d")["default"])},"8a3d":function(e,t,n){"use strict";var r=n("ebee"),a=n.n(r);a.a},9970:function(e,t,n){"use strict";var r;n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return r}));var a=function(){var e=this,t=e.$createElement;e._self._c},o=[]},a9fb:function(e,t,n){"use strict";n.r(t);var r=n("5846"),a=n.n(r);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);t["default"]=a.a},afed:function(e,t,n){"use strict";n.r(t);var r=n("9970"),a=n("a9fb");for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);n("8a3d");var c,u=n("f0c5"),i=Object(u["a"])(a["default"],r["b"],r["c"],!1,null,null,null,!1,r["a"],c);t["default"]=i.exports},c28e:function(e,t,n){"use strict";(function(e){n("a850");r(n("66fd"));var t=r(n("afed"));function r(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("543d")["createPage"])},ebee:function(e,t,n){}},[["c28e","common/runtime","common/vendor"]]]);