(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/auth/auth"],{5846:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("a34a")),a=n("2f62"),c=n("aad7"),o=n("5431");function i(e){return e&&e.__esModule?e:{default:e}}function u(e,t,n,r,a,c,o){try{var i=e[c](o),u=i.value}catch(s){return void n(s)}i.done?t(u):Promise.resolve(u).then(r,a)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){u(c,r,a,o,i,"next",e)}function i(e){u(c,r,a,o,i,"throw",e)}o(void 0)}))}}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p={data:function(){return{sourceData:{},type:""}},onLoad:function(e){var t=this,n=e.type;this.type=n;var r=this.getOpenerEventChannel();r.on("loginDataFromMine",(function(e){var n=e.data,r=n.rawData,a=n.signature;t.sourceData={userInfo:"123",rawData:r,signature:a}}))},computed:d({},(0,a.mapState)(["wechatToken"])),methods:d(d({},(0,a.mapMutations)(["login","setPatientInfo","setPatientList"])),{},{getPhoneNumber:function(t){var n=this;return s(r.default.mark((function a(){var i,u,s,f,l,p,b,v,h,y,g,m,O,w,P,k,x;return r.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(i=t.detail,u=i.encryptedData,s=i.iv,f=i.errMsg,"getPhoneNumber:ok"!==f){r.next=29;break}return l=n.wechatToken,p=l.openId,b=l.sessionKey,v=d(d({},n.sourceData),{},{encryptedData:u,iv:s,openId:p,sessionKey:b}),r.next=6,(0,c.wechatHandleUserInfo)(v);case 6:if(h=r.sent,0!==h.code){r.next=27;break}if(y=h.data,g=y.needRegisterFlag,m=y.pubUser,"0"!==g){r.next=27;break}if(!m){r.next=26;break}if(O=m.username,w=m.idCard,P=m.phoneNumber,k=m.id,n.setPatientInfo(m),!O||!w){r.next=23;break}return n.login(),r.next=17,(0,o.getPatientList)({userId:m.id});case 17:x=r.sent,n.setPatientList(x.data),n.successAlert("登录成功"),n.type?e.switchTab({url:"/pages/tabBar/".concat(n.type,"/").concat(n.type)}):e.navigateBack(),r.next=24;break;case 23:e.redirectTo({url:"/pages/complateInfo/index?p=".concat(P,"&id=").concat(k,"&type=").concat(n.type)});case 24:r.next=27;break;case 26:e.redirectTo({url:"/pages/complateInfo/index?p=".concat(phoneNumber,"&id=").concat(id,"&type=").concat(n.type)});case 27:r.next=30;break;case 29:n.errorAlert("取消操作");case 30:case"end":return r.stop()}}),a)})))()}})};t.default=p}).call(this,n("543d")["default"])},"8a3d":function(e,t,n){"use strict";var r=n("ebee"),a=n.n(r);a.a},a9fb:function(e,t,n){"use strict";n.r(t);var r=n("5846"),a=n.n(r);for(var c in r)"default"!==c&&function(e){n.d(t,e,(function(){return r[e]}))}(c);t["default"]=a.a},afed:function(e,t,n){"use strict";n.r(t);var r=n("e92d"),a=n("a9fb");for(var c in a)"default"!==c&&function(e){n.d(t,e,(function(){return a[e]}))}(c);n("8a3d");var o,i=n("f0c5"),u=Object(i["a"])(a["default"],r["b"],r["c"],!1,null,null,null,!1,r["a"],o);t["default"]=u.exports},c28e:function(e,t,n){"use strict";(function(e){n("a850");r(n("66fd"));var t=r(n("afed"));function r(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("543d")["createPage"])},e92d:function(e,t,n){"use strict";var r;n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return r}));var a=function(){var e=this,t=e.$createElement;e._self._c},c=[]},ebee:function(e,t,n){}},[["c28e","common/runtime","common/vendor"]]]);